<launch>

    <!-- Config file -->
    <arg name="config_path"/>

    <!-- Save / load map -->
    <arg name="load_map_path" default=""/>
    <arg name="save_map_path" default=""/>

    <!-- Data to read -->
    <arg name="subscribe_approx_sync" default="true"/>
    <arg name="subscribe_queue_size" default="10"/>
    <arg name="subscribe_odom" default="true"/>
    <arg name="subscribe_scan" default="false"/>
    <arg name="subscribe_scan_cloud" default="true"/>
    <arg name="subscribe_rgb" default="false"/>
    <arg name="subscribe_rgb_cameras" default="1"/>
    <arg name="subscribe_depth" default="false"/>
    <arg name="subscribe_stereo" default="false"/>

    <arg name="temporary_subscribe_approx_sync" default="true"/>
    <arg name="temporary_subscribe_queue_size" default="10"/>
    <arg name="temporary_subscribe_odom" default="true"/>
    <arg name="temporary_subscribe_scan" default="false"/>
    <arg name="temporary_subscribe_scan_cloud" default="true"/>
    <arg name="temporary_subscribe_rgb" default="false"/>
    <arg name="temporary_subscribe_rgb_cameras" default="1"/>
    <arg name="temporary_subscribe_depth" default="false"/>
    <arg name="temporary_subscribe_stereo" default="false"/>

    <!-- Input topics -->
    <arg name="odom" default="/cartographer/tracked_local_odometry"/>
    <arg name="scan_cloud" default="/velodyne_points"/>
    <arg name="rgb/image" default="/realsense_back_segmentated"/>
    <arg name="rgb/camera_info" default="/realsense_back/color/camera_info"/>
    <arg name="rgb/image_transport" default="raw"/>
    <arg name="rgb_1/image" default="/rgb_1/image"/>
    <arg name="rgb_1/camera_info" default="/rgb_1/camera_info"/>
    <arg name="rgb_1/image_transport" default="raw"/>
    <arg name="rgb_2/image" default="/rgb_2/image"/>
    <arg name="rgb_2/camera_info" default="/rgb_2/camera_info"/>
    <arg name="rgb_2/image_transport" default="raw"/>
    <arg name="optimization_results" default="/cartographer/optimization_results"/>

    <!-- Other -->
    <arg name="node_name" default="occupancy_grid_map"/>

    <!-- Occupanyc grid builder -->
    <node pkg="rtabmap_ros" type="occupancy_grid_map" name="$(arg node_name)" output="screen" args="--uinfo">

        <!-- Config file -->
        <param name="config_path" value="$(arg config_path)"/>

        <!-- Save / load map -->
        <param name="load_map_path" value="$(arg load_map_path)"/>
        <param name="save_map_path" value="$(arg save_map_path)"/>

        <!-- Data to read -->
        <param name="subscribe_approx_sync" value="$(arg subscribe_approx_sync)"/>
        <param name="subscribe_queue_size" value="$(arg subscribe_queue_size)"/>
        <param name="subscribe_odom" value="$(arg subscribe_odom)"/>
        <param name="subscribe_scan" value="$(arg subscribe_scan)"/>
        <param name="subscribe_scan_cloud" value="$(arg subscribe_scan_cloud)"/>
        <param name="subscribe_rgb" value="$(arg subscribe_rgb)"/>
        <param name="subscribe_rgb_cameras" value="$(arg subscribe_rgb_cameras)"/>
        <param name="subscribe_depth" value="$(arg subscribe_depth)"/>
        <param name="subscribe_stereo" value="$(arg subscribe_stereo)"/>

        <param name="temporary_subscribe_approx_sync" value="$(arg temporary_subscribe_approx_sync)"/>
        <param name="temporary_subscribe_queue_size" value="$(arg temporary_subscribe_queue_size)"/>
        <param name="temporary_subscribe_odom" value="$(arg temporary_subscribe_odom)"/>
        <param name="temporary_subscribe_scan" value="$(arg temporary_subscribe_scan)"/>
        <param name="temporary_subscribe_scan_cloud" value="$(arg temporary_subscribe_scan_cloud)"/>
        <param name="temporary_subscribe_rgb" value="$(arg temporary_subscribe_rgb)"/>
        <param name="temporary_subscribe_rgb_cameras" value="$(arg temporary_subscribe_rgb_cameras)"/>
        <param name="temporary_subscribe_depth" value="$(arg temporary_subscribe_depth)"/>
        <param name="temporary_subscribe_stereo" value="$(arg temporary_subscribe_stereo)"/>

        <!-- Input topics -->
        <remap from="odom" to="$(arg odom)"/>
        <remap from="scan_cloud" to="$(arg scan_cloud)"/>
        <remap from="rgb/image" to="$(arg rgb/image)"/>
        <remap from="rgb/camera_info" to="$(arg rgb/camera_info)"/>
        <param name="rgb/image_transport" value="$(arg rgb/image_transport)"/>
        <remap from="rgb_1/image" to="$(arg rgb_1/image)"/>
        <remap from="rgb_1/camera_info" to="$(arg rgb_1/camera_info)"/>
        <param name="rgb_1/image_transport" value="$(arg rgb_1/image_transport)"/>
        <remap from="rgb_2/image" to="$(arg rgb_2/image)"/>
        <remap from="rgb_2/camera_info" to="$(arg rgb_2/camera_info)"/>
        <param name="rgb_2/image_transport" value="$(arg rgb_2/image_transport)"/>
        <remap from="optimization_results" to="$(arg optimization_results)"/>
    </node>

</launch>

